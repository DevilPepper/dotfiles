#!/usr/bin/env bash

if [ "$#" -ne 2 ]
then
  echo "Usage:"
  echo "generate-ssh-key EMAIL KEY_NAME"
  exit 1
fi

email=$1
name=$2

ssh-keygen -t ed25519-sk \
           -C "$email" \
           -f ~/.ssh/$name \
           -N ""

eval "$(ssh-agent -s)"
ssh-add ~/.ssh/$name

# Might fail here if clip alias is not defined
cat ~/.ssh/$name.pub | clip
echo "Public key is in your clipboard!"
